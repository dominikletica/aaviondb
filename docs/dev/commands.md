# Command Reference

Quick overview of the currently available CLI commands, including aliases, usage hints, and short descriptions. All commands follow the unified response schema (`status`, `action`, `message`, `data`, `meta`).

- `api`
    - `reset` – Disable REST access and revoke all tokens (`api reset`).
    - `serve` – Enable the REST API (`api serve`).
    - `status` – Show REST telemetry (enabled flag, counters, timestamps) (`api status`).
    - `stop` – Disable the REST API (`api stop`).
- `auth`
    - `grant` – Issue a scoped API token (`auth grant [label="..."] [projects=...]`).
    - `list` – List issued API tokens (`auth list`).
    - `reset` – Reset authentication state to bootstrap defaults (`auth reset`).
    - `revoke` – Revoke a token by plain value or preview (`auth revoke <token|preview>`).
- `brain`
    - `backup` – Create a backup snapshot (`brain backup [slug] [label=name] [--compress=1]`).
    - `backups` – List stored backups (`brain backups [slug]`).
    - `backup prune` – Remove backups using retention rules (`brain backup prune <slug|*> [--keep=10] [--older-than=30] [--dry-run=1]`).
    - `cleanup` – Purge inactive versions (`brain cleanup <project> [entity] [keep=0] [--dry-run=1]`).
    - `compact` – Rebuild commit indexes and reorder entity versions (`brain compact [project] [--dry-run=1]`).
    - `repair` – Repair entity metadata (active version, statuses, timestamps) (`brain repair [project] [--dry-run=1]`).
    - `restore` – Restore from a backup file (`brain restore <backup> [target] [--overwrite=0] [--activate=0]`).
    - `delete` – Delete a non-active user brain (`brain delete <slug>`).
    - `info` – Display brain metadata (`brain info [slug]`).
    - `init` – Create a new brain and optionally activate it (`brain init <slug> [switch=1]`).
    - `switch` – Switch the active brain (`brain switch <slug>`).
    - `validate` – Run integrity diagnostics (`brain validate [slug]`).
- `brains` – Alias returning the list of available brains (`brains`).
- `cache`
    - `enable` – Persistently enable caching for the active deployment (`cache enable`).
    - `disable` – Disable caching and flush artefacts (`cache disable`).
    - `ttl` – Update the default cache TTL in seconds (`cache ttl <seconds>` or `cache ttl=<seconds>`).
    - `purge` – Remove cached entries globally or by key/tag (`cache purge [key=...] [tag=a,b]`).
    - `status` – Default subcommand; shows current cache settings (`cache status`).
- `config`
    - `get` – Read a configuration value (user or system brain) (`get [key] [--system]`).
    - `set` – Update or delete a configuration entry (`set <key> [value] [--system]`).
- `cron` – Execute all scheduled tasks (CLI/REST, unauthenticated) (`cron`).
- `delete` – Alias for entity deletion (`delete <project> <entity[@version|#commit][,...]>`).
- `diagnose` – Emit diagnostic snapshot (`diagnose`).
- `entity`
    - `delete` – Delete entities or targeted versions (`entity delete <project> <entity-path[@version|#commit][,...]> [--recursive=0|1] [--purge_commits=0|1]`).
    - `list` – List entities of a project (`entity list <project> [parent/path] [with_versions=1]`).
    - `move` – Reassign hierarchy for an entity and its descendants (`entity move <project> <source-path> <target-path> [--mode=merge|replace]`).
    - `remove` – Deactivate active versions (`entity remove <project> <entity-path[,entity2]> [--recursive=0|1]`).
    - `restore` – Restore a specific version (`entity restore <project> <entity> <@version|#commit>`).
    - `save` – Persist a (possibly merged) payload or reparent an entity (`entity save <project> <entity-path[@version|#commit][:fieldset[@version|#commit]]> {json} [--parent=path]`).
    - `show` – Show the active or selected version (`entity show <project> <entity> [@version|#commit]`).
    - `versions` – List versions for an entity (`entity versions <project> <entity>`).
- `export` – Generate `context-unified-v2` bundles (`export <project|*> [entities] [--preset=slug] [--param.foo=value] [description="..."] [usage="..."]`).
- `preset`
    - `list` – List presets stored in the system brain (`preset list`).
    - `show` – Inspect a preset definition (`preset show <slug>`).
    - `create` – Create a preset from a JSON payload (`preset create <slug> --payload='{...}'`).
    - `update` – Update an existing preset (`preset update <slug> --payload='{...}'`).
    - `delete` – Remove a preset (`preset delete <slug>`; default preset is immutable).
    - `copy` – Clone a preset (`preset copy <source> <target> [--force]`).
    - `import` – Import a preset from disk (`preset import <slug> <path> [--force]`).
    - `export` – Export a preset to disk (`preset export <slug> [--file=path]`).
- `get` – Alias for `config get`.
- `help` – List commands or show details (`help [command=name]`).
- `list`
    - `commits` – Alias to list project/entity commits (`list commits <project> [entity] [limit=50]`).
    - `entities` – Alias to list entities (`list entities <project> [parent/path]`).
    - `projects` – Alias to list projects (`list projects`).
    - `versions` – Alias to list versions (`list versions <project> <entity>`).
- `log` – Tail framework logs (`log [level=ERROR|AUTH|DEBUG|ALL] [limit=10]`).
- `log`
    - `view` (default) – Tail the framework log (`log [level=ERROR|AUTH|DEBUG|ALL] [limit=10]`).
    - `rotate` – Rotate the primary log file (`log rotate [keep=10]`).
    - `cleanup` – Remove archived log files beyond a retention threshold (`log cleanup [keep=10]`).
- `project`
    - `commits` – Show commit history (`project commits <slug> [entity] [limit=50]`).
    - `create` – Create project with metadata (`project create <slug> [title="..."] [description="..."]`).
    - `delete` – Permanently delete a project (`project delete <slug> [purge_commits=1]`).
    - `info` – Display project summary (`project info <slug>`).
    - `list` – Alias to list projects (`project list`).
    - `remove` – Archive a project (`project remove <slug>`).
    - `restore` – Reactivate an archived project (`project restore <slug> [--reactivate=0|1]`).
    - `update` – Update metadata (`project update <slug> [title="..."] [description="..."]`).
- `remove` – Alias for entity removal.
- `restore` – Alias for entity restore.
- `save` – Alias for entity save.
- `scheduler`
    - `add` – Register a scheduled CLI command (`scheduler add <slug> <command>`).
    - `edit` – Update the stored command (`scheduler edit <slug> <command>`).
    - `list` – List scheduler tasks (`scheduler list`).
    - `log` – Show scheduler execution history (`scheduler log [limit=20]`).
    - `remove` – Delete a scheduled task (`scheduler remove <slug>`).
- `schema`
    - `lint` – Validate JSON schema payloads (`schema lint {json}`).
    - `list` – List available fieldset schemas (`schema list [with_versions=1]`).
    - `show` – Show a schema revision (`schema show <fieldset[@version|#commit]>`).
    - `create` – Create a new schema entity (`schema create <slug> {json schema}`).
    - `update` – Update an existing schema entity (`schema update <slug> {json schema} [--merge=0|1]`).
    - `save` – Upsert a schema (create if missing) (`schema save <slug> {json schema} [--merge=0|1]`).
    - `delete` – Delete a schema or specific revision (`schema delete <slug> [@version|#commit]`).
- `security`
    - `config` / `status` – Display security configuration and lockdown state (`security config`).
    - `enable` – Enable rate limiting enforcement (`security enable`).
    - `disable` – Disable rate limiting and purge security cache (`security disable`).
    - `lockdown` – Trigger a manual lockdown (`security lockdown [seconds]`).
    - `purge` – Remove cached security artefacts (`security purge`).
- `set` – Alias for `config set` (supports single key/value or bulk JSON payloads).
- `show` – Alias for entity show.
- `status` – Alias for core status snapshot (`status`).
- `events`
    - `listeners` – Display registered event listeners and counts (`events listeners`).
- `scheduler` commands rely on `cron`; ensure tasks reference full CLI statements.

Refer to the individual module documentation in `docs/dev/partials/modules/*.md` for deep dives, examples, and error handling notes.
